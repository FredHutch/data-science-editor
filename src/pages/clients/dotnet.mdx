---
title: Jacdac for .NET
order: 3
---

# Jacdac for .NET

There are various ways to integrate Jacdac into **.NET** projects,
including on desktop, Raspberry Pi, TinyCLR devices.

-   [.NET for IoT](https://dotnet.microsoft.com/en-us/apps/iot) on Raspberry Pi
-   [.NET 5+](https://dotnet.microsoft.com/en-us/download/dotnet) on desktop
-   [TinyCLR](https://www.ghielectronics.com/tinyclr/) on SITCore devices

More information

-   [NuGet packages](https://www.nuget.org/profiles/Jacdac)
-   [GitHub project](https://github.com/microsoft/jacdac-dotnet)

## Getting started

Let's learn about Jacdac for .NET by creating a couple small projects.

### Developer tools

The first step of a Jacdac project is to create a bus which will handle all the communication and
the management of the service client.
Since the bus communicates with hardware, configuring it may vary **a lot** whether you are on a Raspberry Pi or a desktop computer.

To provide a consistent experience, we recommend using the Jacdac developer tools at first.
The developer tools rely on the browser WebUSB/WebSerial/WebBluetooth to connect to the hardware devices and uses a local web socket server
to pipe the packets to the Python SDK. This also allows to debug your Python code in a virtual machine with no hardware access, like GitHub codespaces.

-   Download the [Jacdac.NET.DevTools](https://www.nuget.org/packages/Jacdac.NET.DevTools/) package 
-   launch the devtools server (and keep it running)

```
jacdac.devtools
```

Once the devtools server is running, you should be able to navigate to the local web server and see a dashboard.
**You do not need any hardware to try this out!**

### Blinky

Let's build a blinking LED light project, assuming you have a [LED](/services/led) module.

The first step is to start a Jacdac `Bus` instance using a USB transport. 
You will need the [Jacdac.NET](https://www.nuget.org/packages/Jacdac.NET/), [Jacdac.NET.Clients](https://www.nuget.org/packages/Jacdac.NET.Clients/) and [Jacdac.NET.Transports.WebSockets](https://www.nuget.org/packages/Jacdac.NET.Transports.WebSockets/) NuGet packages.

```cs
using Jacdac;
using Jacdac.Transport.WebSockets;

var bus = new JDBus(WebSocketTransport.Create())
```

Next we create an LED service client (and assign it the `led` role).
The client will allow us to change the color on the LED module.

```cs
using Jacdac.Clients;

var led = new LedClient(bus, "led");
```

Finally, we create a loop with a couple `sleep` command to
toggle between blue and red.

```cs
var speed = 64;
var brightness = 128;
while(true) {
    // blue
    led.Animate(0, 0, brightness, speed);
    Thread.Sleep(1000);
    // red
    led.Animate(brightness, 0, 0, speed);
    Thread.Sleep(1000);
}
```

All together, we get:

```cs
using System.Threading;
using Jacdac;
using Jacdac.Transport.WebSockets;

using Jacdac.Clients;

static class Program {
    static void Main() {
        var bus = new JDBus(WebSocketTransport.Create())
        var led = new LedClient(bus, "led");

        var speed = 64;
        var brightness = 128;
        while(true) {
            // blue
            led.Animate(0, 0, brightness, speed);
            Thread.Sleep(1000);
            // red
            led.Animate(brightness, 0, 0, speed);
            Thread.Sleep(1000);
        }
    }
}
```

### Connecting to hardware

To run Jacdac on a physical device, you will need to use a different transport. This varies per device.

* USB, add the [Jacdac.NET.Transports.Usb](https://www.nuget.org/packages/Jacdac.NET.Transports.Usb/) NuGet package

```cs
using Jacdac.Transports.Usb;
...
var bus = new JDBus(UsbTransport.Create());
```

or add it to the existing bus

```cs
using Jacdac.Transports.Usb;
...
bus.AddTransport(new JDBus(UsbTransport.Create()));
```

* [JacHAT bridge](/services/bridge), add the [Jacdac.NET.Transports.Spi](https://www.nuget.org/packages/Jacdac.NET.Transports.Spi/) NuGet package

![A JacHAT bridge device](/images/devices/microsoft/research/jmspibridgev37v37.catalog.jpg)

```cs
using Jacdac.Transports.Spi;
...
var bus = new JDBus(SpiTransport.Create());
```

### Slidy Blinky

Let's add a [slider](/services/potentiometer) to control the brightness of the LED.
The potentiometer can come in various physical shapes but we can handle it all
through the `PotentiometerClient` client.

```cs
var slider = new PotentiometerClient(bus, "slider");
```

In the `while`, we will read the `position` of the slider into a variable.

```cs
while (true) 
{
    // position is a float in [0..100]
    position = slider.position;
```

From here, we can remap the `position` float in `[0, 100]` to a `int` in `[0, 255]` for the color brightness:

```cs
while (true) 
{
    position = slider.Position;
    var brightness = Math.round(Position / 100.0 * 255.0);
```

All together the slidy blinky sample looks like

```cs
using System.Threading;
using Jacdac;
using Jacdac.Transport.WebSockets;
using Jacdac.Clients;

static class Program {
    static void Main() {
        var bus = new JDBus(WebSocketTransport.Create());
        var led = new LedClient(bus, "led");
        var slider = new PotentiometerClient(bus, "slider");

        var speed = 64;
        while(true) {
            var position = slider.Position;
            var brightness = Math.round(position / 100.0 * 255.0);
            // blue
            led.Animate(0, 0, brightness, speed);
            Thread.Sleep(1000);
            // red
            led.Animate(brightness, 0, 0, speed);
            Thread.Sleep(1000);
        }
    }
}
```

